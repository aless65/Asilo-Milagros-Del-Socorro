"use strict";(self.webpackChunkubold_angular=self.webpackChunkubold_angular||[]).push([[9837],{39837:(F,h,n)=>{n.r(h),n.d(h,{ListModule:()=>z});var b=n(69808),v=n(52382),f=n(1413),g=n(29095),y=n(81819),d=n(4521),l=n(42631),e=n(5e3),L=n(22313),T=n(39475),S=n(6086),C=n(59699);const w=["advancedTable"],k=[{path:"",component:(()=>{class i{constructor(t,a,s){this.router=t,this.route=a,this.sanitizer=s,this.pageTitle=[],this.columns=[],this.pageSizeOptions=[5,10,20],this.ticketList=[]}ngOnInit(){this.pageTitle=[{label:"Tickets",path:"/"},{label:"Ticket List",path:"/",active:!0}],this._fetchData(),this.initAdvancedTableData()}_fetchData(){this.ticketList=l.S}initAdvancedTableData(){this.columns=[{name:"id",label:"ID",formatter:this.ticketIdFormatter.bind(this)},{name:"requested_by",label:"Requested By",formatter:this.ticketRequestedFormatter.bind(this)},{name:"subject",label:"Subject",formatter:t=>t.subject},{name:"assignee",label:"Assignee",formatter:this.ticketAssigneeFormatter.bind(this),sort:!1},{name:"priority",label:"Priority",formatter:this.ticketPriorityFormatter.bind(this)},{name:"status",label:"Status",formatter:this.ticketStatusFormatter.bind(this)},{name:"created_date",label:"Created Date",formatter:t=>t.created_date},{name:"due_date",label:"Due Date",formatter:t=>t.due_date},{name:"Action",label:"Action",width:75,formatter:this.customerActionFormatter.bind(this),sort:!1}]}handleTableLoad(t){document.querySelectorAll(".ticket").forEach(a=>{a.addEventListener("click",()=>{this.router.navigate(["../details"],{relativeTo:this.route,queryParams:{id:a.id}})})})}ticketIdFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`<b>${t.id}</b>`)}ticketRequestedFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`<a href="javascript: void(0);" class="text-body ticket" id="${t.id}">\n        <img src="${t.requested_by.image}" alt="contact-img" title="contact-img" class="rounded-circle avatar-xs" />\n        <span class="ms-2">${t.requested_by.name}</span>\n         </a>`)}ticketAssigneeFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`  <a href="javascript: void(0);">\n        <img src="${t.assignee}" alt="contact-img" title="contact-img" class="rounded-circle avatar-xs" />\n        </a>`)}ticketPriorityFormatter(t){return this.sanitizer.bypassSecurityTrustHtml("Low"==t.priority?' <span class="badge bg-soft-secondary text-secondary">Low</span>':"Medium"==t.priority?' <span class="badge bg-soft-warning text-warning">Medium</span>':' <span class="badge bg-soft-danger text-danger">High</span>')}ticketStatusFormatter(t){return this.sanitizer.bypassSecurityTrustHtml("Open"==t.status?'<span class="badge bg-success">Open</span>':'<span class="badge  bg-secondary text-light">Closed</span>')}customerActionFormatter(){return this.sanitizer.bypassSecurityTrustHtml(' <div class="btn-group dropdown" >\n       <a href="javascript: void(0);" class="table-action-btn arrow-none btn btn-light btn-sm" ><i class="mdi mdi-dots-horizontal"></i></a>\n       <div class="dropdown-menu dropdown-menu-end" >\n        <a class="dropdown-item" href="javascript:void(0)"><i class="mdi mdi-pencil me-2 text-muted font-18 vertical-middle"></i>Edit Ticket</a>\n        <a class="dropdown-item" href="javascript:void(0)"><i class="mdi mdi-check-all me-2 text-muted font-18 vertical-middle"></i>Close</a>\n        <a class="dropdown-item" href="javascript:void(0)"><i class="mdi mdi-delete me-2 text-muted font-18 vertical-middle"></i>Remove</a>\n        <a class="dropdown-item" href="javascript:void(0)"><i class="mdi mdi-star me-2 font-18 text-muted vertical-middle"></i>Mark as Unread</a>\n        </div>\n        </div>')}compare(t,a){return t<a?-1:t>a?1:0}sort(t){this.ticketList=""===t.direction?l.S:[...this.ticketList].sort((a,s)=>{let r;return r="requested_by"===t.column?this.compare(a.requested_by.name,s.requested_by.name):this.compare(a[t.column],s[t.column]),"asc"===t.direction?r:-r})}matches(t,a){var s,r,c,m,u,p;return(null===(s=t.requested_by.name)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(r=t.subject)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(c=t.priority)||void 0===c?void 0:c.toLowerCase().includes(a))||(null===(m=t.created_date)||void 0===m?void 0:m.toLowerCase().includes(a))||(null===(u=t.due_date)||void 0===u?void 0:u.toLowerCase().includes(a))||(null===(p=t.status)||void 0===p?void 0:p.toLocaleLowerCase().includes(a))}searchData(t){if(""===t)this._fetchData();else{let a=l.S;a=a.filter(s=>this.matches(s,t)),this.ticketList=a}}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(d.gz),e.\u0275\u0275directiveInject(L.DomSanitizer))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-tickets-list"]],viewQuery:function(t,a){if(1&t&&e.\u0275\u0275viewQuery(w,5),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(a.advancedTable=s.first)}},decls:21,vars:12,consts:[["title","Ticket List",3,"breadcrumbItems"],[1,"row"],[1,"col-md-6","col-xl-3"],["variant","white","iconContainerClass","rounded-circle bg-primary","description","Total Tickets","icon","fe-tag",3,"stats"],["variant","white","iconContainerClass","rounded-circle bg-warning","description","Pending Tickets","icon","fe-clock",3,"stats"],["variant","white","iconContainerClass","rounded-circle bg-success","description","Closed Tickets","icon","fe-check-circle",3,"stats"],["variant","white","iconContainerClass","rounded-circle bg-danger","description","Deleted Tickets","icon","fe-trash-2",3,"stats"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","button",1,"btn","btn-sm","btn-blue","waves-effect","waves-light","float-end"],[1,"mdi","mdi-plus-circle"],[1,"header-title","mb-4"],["tableClasses","table-centered",3,"tableData","columns","hasRowSelection","pagination","isSearchable","pageSizeOptions","isSortable","handleTableLoad","search","sort"],["advancedTable",""]],template:function(t,a){1&t&&(e.\u0275\u0275element(0,"app-page-title",0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2),e.\u0275\u0275element(3,"app-widget-statistics-card4",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"app-widget-statistics-card4",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"app-widget-statistics-card4",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",2),e.\u0275\u0275element(9,"app-widget-statistics-card4",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",1)(11,"div",7)(12,"div",8)(13,"div",9)(14,"button",10),e.\u0275\u0275element(15,"i",11),e.\u0275\u0275text(16," Add Ticket "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"h4",12),e.\u0275\u0275text(18,"Manage Tickets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"app-advanced-table",13,14),e.\u0275\u0275listener("handleTableLoad",function(r){return a.handleTableLoad(r)})("search",function(r){return a.searchData(r)})("sort",function(r){return a.sort(r)}),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275property("breadcrumbItems",a.pageTitle),e.\u0275\u0275advance(3),e.\u0275\u0275property("stats",3947),e.\u0275\u0275advance(2),e.\u0275\u0275property("stats",624),e.\u0275\u0275advance(2),e.\u0275\u0275property("stats",3195),e.\u0275\u0275advance(2),e.\u0275\u0275property("stats",128),e.\u0275\u0275advance(10),e.\u0275\u0275property("tableData",a.ticketList)("columns",a.columns)("hasRowSelection",!1)("pagination",!0)("isSearchable",!0)("pageSizeOptions",a.pageSizeOptions)("isSortable",!0))},directives:[T.T,S.F,C.j],styles:[""]}),i})()}];let j=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(k)],d.Bz]}),i})(),z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[b.CommonModule,v.u5,g.p,f.$,y.y,j]]}),i})()}}]);