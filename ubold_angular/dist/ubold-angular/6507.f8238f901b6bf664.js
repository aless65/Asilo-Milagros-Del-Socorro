"use strict";(self.webpackChunkubold_angular=self.webpackChunkubold_angular||[]).push([[6507],{16507:(E,p,a)=>{a.r(p),a.d(p,{ListModule:()=>j});var d=a(69808),i=a(52382),c=a(59182),h=a(1413),_=a(29095),f=a(4521),e=a(5e3),g=a(22313),C=a(40520);let y=(()=>{class o{constructor(t){this.http=t,this.Url="http://asilomilagrosdelsocorro.somee.com/api/"}getProveedores(){return this.http.get(`${this.Url}Proveedores/Listado`)}addProveedores(t){return this.http.post(`${this.Url}Proveedores/Insertar`,t)}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(C.eN))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var L=a(39475),S=a(59699);const T=["advancedTable"],I=["content"];function w(o,l){1&o&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275text(1," Nombre requerido "),e.\u0275\u0275elementEnd())}function x(o,l){1&o&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275text(1," Correo requerido "),e.\u0275\u0275elementEnd())}const b=function(o){return{"is-invalid":o}};function D(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"h4",11),e.\u0275\u0275text(2,"Agregar proveedor"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",12),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",13)(5,"form",14,15),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().submitForm()}),e.\u0275\u0275elementStart(7,"div",16)(8,"label",17),e.\u0275\u0275text(9,"Nombre"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"input",18),e.\u0275\u0275template(11,w,2,0,"div",19),e.\u0275\u0275elementStart(12,"label",17),e.\u0275\u0275text(13,"Correo electr\xf3nico"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",20),e.\u0275\u0275template(15,x,2,0,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",21)(17,"button",22),e.\u0275\u0275text(18,"Agregar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",23),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.close("")}),e.\u0275\u0275text(20,"Cancelar"),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=e.\u0275\u0275reference(6),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",r.newProveedor),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,b,t.submitted&&r.form1.name.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&r.form1.name.invalid),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,b,t.submitted&&r.form1.name.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&r.form1.name.invalid)}}const F=[{path:"",component:(()=>{class o{constructor(t,r,n,s){this.sanitizer=t,this.activeModal=r,this.fb=n,this.service=s,this.pageTitle=[],this.proveedores=[],this.columns=[]}ngOnInit(){this.pageTitle=[{label:"Inicio",path:"/"},{label:"Proveedores",path:"/",active:!0}],this._fetchData(),this.initAdvancedTableData(),this.newProveedor=this.fb.group({name:["",i.kI.required],correo:["",i.kI.required],phone:["",i.kI.required],muni:["",i.kI.required],direccion:["",i.kI.required]})}get form1(){return this.newProveedor.controls}openModal(){this.activeModal.open(this.content,{centered:!0})}submitForm(){this.newProveedor.invalid?console.log("pipi"):(this.service.addProveedores({prov_Nombre:this.newProveedor.value.name,prov_CorreoElectronico:this.newProveedor.value.correo,prov_Telefono:this.newProveedor.value.phone,muni_Id:this.newProveedor.value.muni,muni_Direccion:this.newProveedor.value.direccion,prov_UsuCreacion:1}).subscribe(r=>{console.log("se pudo:",r),this._fetchData()},r=>{console.log("no se pudo:",r)}),this.activeModal.dismissAll(""))}_fetchData(){this.service.getProveedores().subscribe(t=>{this.proveedores=t.data})}initAdvancedTableData(){this.columns=[{name:"prov_Id",label:"ID",formatter:t=>t.prov_Id},{name:"prov_Nombre",label:"Nombre",formatter:t=>t.prov_Nombre},{name:"prov_CorreoElectronico",label:"Correo electr\xf3nico",formatter:t=>t.prov_CorreoElectronico},{name:"prov_Telefono",label:"Tel\xe9fono",formatter:t=>t.prov_Telefono},{name:"prov_Direccion",label:"Direcci\xf3n",formatter:t=>t.prov_Direccion},{name:"Action",label:"Action",width:82,formatter:this.proveedorActionFormatter.bind(this),sort:!1}]}handleTableLoad(t){document.querySelectorAll(".proveedor").forEach(r=>{})}proveedorNameFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`\n      <div class="table-user">\n      <a href="javascript:void(0);" class="customer text-body fw-semibold" id="${t.prov_Id}">${t.prov_Nombre}</a>\n      `)}proveedorActionFormatter(){return this.sanitizer.bypassSecurityTrustHtml(' <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-square-edit-outline"></i></a>\n        <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-delete"></i></a>')}matches(t,r){var n,s,m,u,v;return(null===(n=t.prov_Id)||void 0===n?void 0:n.toString().includes(r))||(null===(s=t.prov_Nombre)||void 0===s?void 0:s.toLowerCase().includes(r))||(null===(m=t.prov_CorreoElectronico)||void 0===m?void 0:m.toLowerCase().includes(r))||(null===(u=t.prov_Telefono)||void 0===u?void 0:u.toLowerCase().includes(r))||(null===(v=t.prov_Direccion)||void 0===v?void 0:v.toLowerCase().includes(r))}searchData(t){if(""===t)this._fetchData();else{let r=this.proveedores;r=r.filter(n=>this.matches(n,t)),this.proveedores=r}}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(g.DomSanitizer),e.\u0275\u0275directiveInject(c.FF),e.\u0275\u0275directiveInject(i.qu),e.\u0275\u0275directiveInject(y))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-proveedores-list"]],viewQuery:function(t,r){if(1&t&&(e.\u0275\u0275viewQuery(T,5),e.\u0275\u0275viewQuery(I,7)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(r.advancedTable=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(r.content=n.first)}},decls:13,vars:7,consts:[["title","Proveedores",3,"breadcrumbItems"],[1,"row"],[1,"card"],[1,"card-body"],[1,"row","justify-content-between","mb-2"],[1,"col-12"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","mb-2",3,"click"],["tableClasses","table-centered table-nowrap table-hover",3,"tableData","columns","pagination","isSearchable","hasRowSelection","isSortable","handleTableLoad","search"],["advancedTable",""],["content",""],[1,"modal-header","bg-light"],["id","myCenterModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[3,"formGroup","ngSubmit"],["addProveedor","ngForm"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Nombre","required","","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","id","correo","placeholder","Correo electr\xf3nico","required","","formControlName","correo",1,"form-control",3,"ngClass"],[1,"text-end"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","me-1"],["type","button",1,"btn","btn-danger","waves-effect","waves-light",3,"click"],[1,"invalid-feedback"]],template:function(t,r){1&t&&(e.\u0275\u0275element(0,"app-page-title",0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"button",6),e.\u0275\u0275listener("click",function(){return r.openModal()}),e.\u0275\u0275text(8,"Agregar"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"app-advanced-table",7,8),e.\u0275\u0275listener("handleTableLoad",function(s){return r.handleTableLoad(s)})("search",function(s){return r.searchData(s)}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(11,D,21,9,"ng-template",null,9,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275property("breadcrumbItems",r.pageTitle),e.\u0275\u0275advance(9),e.\u0275\u0275property("tableData",r.proveedores)("columns",r.columns)("pagination",!0)("isSearchable",!0)("hasRowSelection",!1)("isSortable",!1))},directives:[L.T,S.j,i._Y,i.JL,i.sg,i.Fj,i.Q7,i.JJ,i.u,d.NgClass,d.NgIf],styles:[""]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[f.Bz.forChild(F)],f.Bz]}),o})(),j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[d.CommonModule,i.u5,c.jF,h.$,_.p,P,i.UX,c.bz]]}),o})()}}]);